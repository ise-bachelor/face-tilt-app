# 顔の動きで画面が傾くWebアプリケーション

ユーザーの顔の動きに応じてリアルタイムに画面が傾くインタラクティブなWebアプリケーションです。

## 機能

- 📹 Webカメラから顔の特徴点を検出
- 🔄 顔の動きに連動して画面が3D回転
  - 顔を右に向ける → 画面が右奥に傾く
  - 顔を下に向ける → 画面が下に傾く
  - 顔を右に傾ける → 画面が右に傾く
- 🖱️ クリック入力の位置ずれなし（3D変換されたDOM要素も正確にクリック可能）
- ⚡ リアルタイムな動作

## 技術スタック

- **React / Next.js**: UIフレームワーク
- **TensorFlow.js**: 機械学習ライブラリ
- **MediaPipe Face Mesh**: 顔の特徴点検出モデル
- **CSS 3D Transforms**: 画面の傾き表現

## セットアップ

### 1. 依存関係のインストール

```bash
npm install
```

### 2. 開発サーバーの起動

```bash
npm run dev
```

ブラウザで `http://localhost:3000` を開きます。

### 3. カメラの許可

初回アクセス時にカメラへのアクセス許可を求められるので、許可してください。

## Vercelへのデプロイ

### 方法1: Vercel CLIを使用

```bash
# Vercel CLIのインストール
npm i -g vercel

# デプロイ
vercel
```

### 方法2: GitHubと連携

1. このプロジェクトをGitHubにプッシュ
2. [Vercel](https://vercel.com)にアクセスしてログイン
3. "New Project"をクリック
4. GitHubリポジトリを選択
5. 自動的にビルド設定が検出されます
6. "Deploy"をクリック

## 実装の詳細

### 顔の角度計算

3つの回転角度を計算しています：

1. **Yaw (ヨー)**: 左右の向き
   - 鼻先と両目の中心点のX座標差から計算
   
2. **Pitch (ピッチ)**: 上下の向き
   - 鼻先と両目の中心点のY座標差を顔の高さで正規化
   
3. **Roll (ロール)**: 傾き
   - 両目を結ぶ線の角度から計算

### クリック入力の精度

CSS 3D transformsを使用しているため、ブラウザが自動的に変換後の座標でクリックイベントを処理します。追加の座標変換は不要です。

### パフォーマンス最適化

- `requestAnimationFrame`を使用した効率的な描画ループ
- 顔検出の結果を直接状態に反映
- `transition`プロパティによるスムーズなアニメーション

## ブラウザ互換性

- Chrome / Edge (推奨)
- Firefox
- Safari (カメラアクセスにHTTPSが必要)

## トラブルシューティング

### カメラが動作しない

- ブラウザがカメラへのアクセスを許可しているか確認
- HTTPSまたはlocalhostでアクセスしているか確認
- 他のアプリがカメラを使用していないか確認

### 顔が検出されない

- 照明が十分か確認
- カメラに顔全体が映っているか確認
- ブラウザのコンソールでエラーを確認

### デプロイ後にカメラが動作しない

- VercelのデプロイはHTTPSで提供されるため問題ありません
- カスタムドメインを使用する場合はHTTPSを確保してください

## ライセンス

MIT
